(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{33:function(e,t,n){e.exports=n(50)},38:function(e,t,n){},39:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(19),c=n.n(l),i=n(21),o=(n(38),n(39),n(10)),u=n(2),s=n(16),d=n(8),m=n(9),p=n(14),h=n(12),E=n(11),b=n(17),v=n.n(b),f=n(22),g=function(){return fetch("https://economia.awesomeapi.com.br/json/all").then((function(e){return e.json().then((function(t){return e.ok?Promise.resolve(t):Promise.reject(t)}))}))},y=function(e){return{type:"GET_CURRENCY",currencies:e}},j=(n(45),function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).onChangeHandler=e.onChangeHandler.bind(Object(p.a)(e)),e.disableButton=e.disableButton.bind(Object(p.a)(e)),e.state={email:"",password:"",redirect:!1},e}return Object(m.a)(n,[{key:"onChangeHandler",value:function(e,t){this.setState(Object(s.a)({},e,t))}},{key:"disableButton",value:function(e){var t=this,n=this.state,a=n.email,l=n.password,c=!(l.length>=6&&/\S+@\S+\.\S+/.test(a));return r.a.createElement("button",{type:"submit",className:"btn btn-warning btn-size",disabled:c,onClick:function(){return e(a),void t.setState({redirect:!0})}},"Login")}},{key:"render",value:function(){var e=this,t=this.props.getEmail;return!0===this.state.redirect?r.a.createElement(u.a,{to:"/wallet/main"}):r.a.createElement("div",{className:"position-absolute top-50 start-50 translate-middle login-box"},r.a.createElement("img",{src:"images/currency_wallet.png",alt:"wallet"}),r.a.createElement("h1",null,"World Wallet"),r.a.createElement("div",null,r.a.createElement("input",{type:"email","data-testid":"email-input",placeholder:"Name@example.com",onChange:function(t){return e.onChangeHandler("email",t.target.value)},className:"form-control input-width"}),r.a.createElement("input",{placeholder:"Password",type:"password","data-testid":"password-input",onChange:function(t){return e.onChangeHandler("password",t.target.value)},className:"form-control input-width"}),this.disableButton(t)))}}]),n}(r.a.Component)),O=Object(o.b)(null,(function(e){return{getEmail:function(t){return e(function(e){return{type:"USER_INFO",email:e}}(t))}}}))(j),C=n(3),x=(n(47),{value:0,description:"",currency:"USD",method:"Cash",tag:"Food",id:0,total:"0.00"}),k=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).state=Object(C.a)({},x),e.onChangeHandler=e.onChangeHandler.bind(Object(p.a)(e)),e.handleClick=e.handleClick.bind(Object(p.a)(e)),e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.getCurrency)()}},{key:"onChangeHandler",value:function(e){var t=e.target;this.setState(Object(s.a)({},t.name,t.value))}},{key:"handleClick",value:function(){var e=Object(f.a)(v.a.mark((function e(t){var n,a,r,l,c,i,o,u,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=this.state,a=n.value,r=n.description,l=n.currency,c=n.method,i=n.tag,o=n.id,u=this.props.saveExpenses,e.next=5,g();case 5:s=e.sent,u({value:a,description:r,currency:l,method:c,tag:i,id:o,exchangeRates:s}),this.setState(Object(C.a)(Object(C.a)({},x),{},{id:o+1}));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tagRender",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"tag"},"Tag:",r.a.createElement("select",{id:"tag",name:"tag",onChange:function(t){return e.onChangeHandler(t)},"data-testid":"tag-input",className:"form-select"},r.a.createElement("option",{value:"Food"},"Food"),r.a.createElement("option",{value:"Recreation"},"Recreation"),r.a.createElement("option",{value:"Work"},"Work"),r.a.createElement("option",{value:"Transport"},"Transport"),r.a.createElement("option",{value:"Health"},"Health"))))}},{key:"methodRender",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"method",className:"size"},"Payment Method:",r.a.createElement("select",{id:"method",name:"method",onChange:function(t){return e.onChangeHandler(t)},"data-testid":"method-input",className:"form-select"},r.a.createElement("option",{value:"Cash"},"Cash"),r.a.createElement("option",{value:"Credit Card"},"Credit Card"),r.a.createElement("option",{value:"Debit Card"},"Debit Card"))))}},{key:"currencyRender",value:function(e){var t=this;return r.a.createElement("select",{id:"currency",name:"currency",onChange:function(e){return t.onChangeHandler(e)},"data-testid":"currency-input",className:"form-select"},e.map((function(e){return"USDT"===e?"":r.a.createElement("option",{key:e,"data-testid":e},e)})))}},{key:"render",value:function(){var e=this,t=this.state,n=t.value,a=t.description,l=this.props.currencies,c=Object.keys(l||{});return r.a.createElement("div",{className:"addTable"},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"value"},"Value:",r.a.createElement("input",{id:"value",name:"value",value:n,type:"number",onChange:function(t){return e.onChangeHandler(t)},"data-testid":"value-input",className:"form-control"}))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"currency"},"Currency:",this.currencyRender(c))),this.methodRender(),this.tagRender(),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"description"},"Description:",r.a.createElement("input",{id:"description",name:"description",value:a,type:"text",onChange:function(t){return e.onChangeHandler(t)},"data-testid":"description-input",className:"form-control"}))),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",className:"btn btn-primary mt-4",onClick:this.handleClick},"Add expense")))}}]),n}(a.Component);k.defaultProps={currencies:{}};var w=Object(o.b)((function(e){return{expenses:e.wallet.expenses,currencies:e.wallet.currencies[0],user:e.user.email}}),(function(e){return{getCurrency:function(){return e(function(){var e=Object(f.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"REQUEST_CURRENCY"}),e.next=4,g();case 4:n=e.sent,t(y(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:"FAILED_REQUEST",error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())},saveExpenses:function(t){return e({type:"SAVE_EXPENSE",expenses:t})}}}))(k),R=(n(48),function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"getTotal",value:function(){return this.props.expenses.map((function(e){var t=e.currency,n=e.value,a=e.exchangeRates[t];return Number(n)*Number(a.ask)})).reduce((function(e,t){return e+t}),0)}},{key:"render",value:function(){var e=this.props.user;return r.a.createElement("header",null,r.a.createElement("h1",null,"World Wallet"),r.a.createElement("h3",null,"Email:",r.a.createElement("span",{"data-testid":"email-field",className:"me-5"},e),"Total expenditure: R$",r.a.createElement("span",{"data-testid":"total-field"},(Math.round(100*this.getTotal())/100).toFixed(2)),r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL")))}}]),n}(a.Component));R.defaultProps={expenses:[]};var N=Object(o.b)((function(e){return{user:e.user.email,expenses:e.wallet.expenses}}))(R),S=(n(49),function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"expensesTable",value:function(e){var t=e.value,n=e.description,a=e.currency,l=e.method,c=e.tag,i=e.id,o=e.exchangeRates,u=this.props.deleteExpense,s=Object.entries(o).find((function(e){return e[0]===a}))[1];return console.log(s),r.a.createElement("tr",{key:i},r.a.createElement("td",null,n),r.a.createElement("td",null,c),r.a.createElement("td",null,l),r.a.createElement("td",null,t),r.a.createElement("td",null,s.code),r.a.createElement("td",null,"R$",parseFloat(s.ask).toFixed(2)),r.a.createElement("td",null,"R$",(parseFloat(t)*parseFloat(s.ask)).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button","data-testid":"delete-btn",onClick:function(){return u(i)},className:"btn btn-danger"},"X")))}},{key:"render",value:function(){var e=this,t=this.props.expenses;return r.a.createElement("div",{className:"tableContainer"},r.a.createElement("table",{className:"expenseTable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"Payment Method"),r.a.createElement("th",null,"Value"),r.a.createElement("th",null,"Currency"),r.a.createElement("th",null,"Currency Rate"),r.a.createElement("th",null,"Exchange Value"),r.a.createElement("th",null,"Conversion Currency"),r.a.createElement("th",null,"Delete"))),r.a.createElement("tbody",null,t.map((function(t){return e.expensesTable(t)})))))}}]),n}(a.Component));S.defaultProps={expenses:[]};var F=Object(o.b)((function(e){return{user:e.user.email,expenses:e.wallet.expenses}}),(function(e){return{deleteExpense:function(t){return e(function(e){return{type:"REMOVE_EXPENSE",id:e}}(t))}}}))(S),T=function(e){Object(h.a)(n,e);var t=Object(E.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(N,null),r.a.createElement(w,null),r.a.createElement(F,null))}}]),n}(r.a.Component);var H=function(){return r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/wallet/main",component:T}),r.a.createElement(u.b,{path:"/wallet",exact:!0,component:O}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=n(13),D=n(30),P=n(31),U={email:""},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_INFO":return Object(C.a)(Object(C.a)({},e),{},{email:t.email});default:return e}},B=n(32),M={currencies:[],expenses:[]};var V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUEST_CURRENCY":return Object(C.a)(Object(C.a)({},e),{},{isFetching:!0});case"GET_CURRENCY":return Object(C.a)(Object(C.a)({},e),{},{isFetching:!1,currencies:[t.currencies]});case"FAILED_REQUEST":return Object(C.a)(Object(C.a)({},e),{},{isFetching:!1,error:t.error});case"SAVE_EXPENSE":return Object(C.a)(Object(C.a)({},e),{},{expenses:[].concat(Object(B.a)(e.expenses),[t.expenses])});case"REMOVE_EXPENSE":return Object(C.a)(Object(C.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.id}))});default:return e}},A=Object(_.combineReducers)({user:W,wallet:V}),I=Object(_.createStore)(A,Object(D.composeWithDevTools)(Object(_.applyMiddleware)(P.a)));c.a.render(r.a.createElement(i.a,null,r.a.createElement(o.a,{store:I},r.a.createElement(H,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.45dac0c7.chunk.js.map